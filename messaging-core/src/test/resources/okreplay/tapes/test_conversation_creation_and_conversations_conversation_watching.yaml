!tape
name: test conversation creation and conversations & conversation watching
interactions:
- recorded: 2022-06-09T12:51:38.218Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 22fb19ccce48c2773255053ad3b5e94d3685a158ca3d6d21a549b4052fcadce6
      X-APOLLO-OPERATION-NAME: Conversations
    body: '{"operationName":"Conversations","variables":{"pageInfo":{}},"query":"query Conversations($pageInfo: OpaqueCursorPage!) { conversations(page: $pageInfo) { conversations { __typename ...ConversationFragment } hasMore nextCursor } }  fragment EphemeralUrlFragment
      on EphemeralUrl { expiresAt url }  fragment ProviderFragment on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation { id provider { __typename ...ProviderFragment
      } typingAt seenUntil }  fragment ConversationFragment on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Thu, 09 Jun 2022 12:51:38 GMT
      connection: close
      content-length: '15567'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: a9051726-3297-49ad-a77a-77071c5cfcbf
    body: '{"data":{"conversations":{"conversations":[{"__typename":"Conversation","id":"9a55baf6-27d6-403d-957e-ff4412367752","title":null,"description":null,"createdAt":"2022-06-07T14:10:52.327+02:00","updatedAt":"2022-06-09T13:11:51.832+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":"Vous : Test","unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"c0874a2a-35a9-4928-917a-f5cc01c9d155","title":null,"description":null,"createdAt":"2022-05-19T16:44:06.412+02:00","updatedAt":"2022-05-19T16:45:13.000+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":"Vous avez envoyé une image","unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"b013aa8c-be89-42e1-8938-0a326f6ea639","title":null,"description":null,"createdAt":"2022-05-19T15:57:35.935+02:00","updatedAt":"2022-05-19T16:44:18.605+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":"Vous avez envoyé une image","unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"f27eb12e-a55b-4124-8879-eb71eacb8ad2","title":null,"description":null,"createdAt":"2022-05-19T11:43:18.177+02:00","updatedAt":"2022-05-19T15:30:11.372+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":"Vous avez envoyé une image","unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"b8896bb5-c305-4ad2-8985-9304d7a32930","title":null,"description":null,"createdAt":"2022-05-19T11:56:35.920+02:00","updatedAt":"2022-05-19T11:56:35.920+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"9b6d8963-25b1-466c-8d5e-cd0e968f9805","title":null,"description":null,"createdAt":"2022-05-19T11:58:53.185+02:00","updatedAt":"2022-05-19T11:58:53.185+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"e11991d8-6b6f-4a25-b27f-499fb807ea47","title":null,"description":null,"createdAt":"2022-05-19T11:59:14.602+02:00","updatedAt":"2022-05-19T11:59:14.602+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"0405d141-84e5-4885-a090-4ec1a9bce4da","title":null,"description":null,"createdAt":"2022-05-19T11:59:49.307+02:00","updatedAt":"2022-05-19T11:59:49.307+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"dbb2f0e3-9516-4957-8e2c-1d7e28e5e996","title":null,"description":null,"createdAt":"2022-05-19T12:11:32.079+02:00","updatedAt":"2022-05-19T12:11:32.079+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"b930953a-79aa-44c5-b903-389bdf4ac458","title":null,"description":null,"createdAt":"2022-05-19T12:12:14.897+02:00","updatedAt":"2022-05-19T12:12:14.897+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"a81beea0-0807-44e4-97a9-d6ed5dad0aa2","title":null,"description":null,"createdAt":"2022-05-19T12:18:20.209+02:00","updatedAt":"2022-05-19T12:18:20.209+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"e41f66f0-5028-4398-a726-e96583a830dc","title":null,"description":null,"createdAt":"2022-05-19T12:21:04.005+02:00","updatedAt":"2022-05-19T12:21:04.005+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"dff1c697-5c35-46fb-9b8a-ad8e24fe33f9","title":null,"description":null,"createdAt":"2022-05-19T12:21:57.168+02:00","updatedAt":"2022-05-19T12:21:57.168+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"fa5ae70c-d504-4b37-af87-621c4834f06c","title":null,"description":null,"createdAt":"2022-05-19T12:25:47.477+02:00","updatedAt":"2022-05-19T12:25:47.477+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"e873c2ff-69ac-4a8b-a939-2d2700a58783","title":null,"description":null,"createdAt":"2022-05-19T12:27:15.075+02:00","updatedAt":"2022-05-19T12:27:15.075+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"564c8e39-69cc-4a61-8e6f-42e13642dca9","title":null,"description":null,"createdAt":"2022-05-19T12:31:51.553+02:00","updatedAt":"2022-05-19T12:31:51.553+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"00ff4d84-4e95-4251-a6af-0ca16c712f9d","title":null,"description":null,"createdAt":"2022-05-19T14:48:52.596+02:00","updatedAt":"2022-05-19T14:48:52.596+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"2a96eb83-b021-4426-967a-19310e74576e","title":null,"description":null,"createdAt":"2022-05-19T15:04:28.004+02:00","updatedAt":"2022-05-19T15:04:28.004+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"e936b1bd-a88a-4af3-8524-a706456d86b6","title":null,"description":null,"createdAt":"2022-05-19T15:05:18.624+02:00","updatedAt":"2022-05-19T15:05:18.624+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"d66b90fe-4831-4fa5-9989-58b16cbf5981","title":null,"description":null,"createdAt":"2022-05-19T15:29:30.155+02:00","updatedAt":"2022-05-19T15:29:30.155+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"9e59b44c-dc89-44a9-a526-e9b3a105e67f","title":null,"description":null,"createdAt":"2022-05-19T16:53:05.698+02:00","updatedAt":"2022-05-19T16:53:05.698+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"010047a8-dd1f-418f-aa6f-c8eba7c2a3c2","title":null,"description":null,"createdAt":"2022-05-19T16:53:35.774+02:00","updatedAt":"2022-05-19T16:53:35.774+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"54c0f727-d053-4207-b7d4-bb627a356fb0","title":null,"description":null,"createdAt":"2022-05-19T16:53:51.520+02:00","updatedAt":"2022-05-19T16:53:51.520+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"11b7cd7f-24d1-4ba0-a6d6-e245a7753847","title":null,"description":null,"createdAt":"2022-06-07T13:49:24.758+02:00","updatedAt":"2022-06-07T13:49:24.758+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"3d9fd21f-5a00-4dcd-be6c-d8fa47c9fc81","title":null,"description":null,"createdAt":"2022-06-07T13:56:19.707+02:00","updatedAt":"2022-06-07T13:56:19.707+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"fc808576-d357-4705-96ea-7cf42d158062","title":null,"description":null,"createdAt":"2022-06-07T13:57:52.292+02:00","updatedAt":"2022-06-07T13:57:52.292+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"b6f5cc57-c549-49cb-bf50-12838941751e","title":null,"description":null,"createdAt":"2022-06-07T13:59:18.944+02:00","updatedAt":"2022-06-07T13:59:18.944+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"3dbb12a5-319d-483a-ba00-1794f73c81d5","title":null,"description":null,"createdAt":"2022-06-07T14:12:39.095+02:00","updatedAt":"2022-06-07T14:12:39.095+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"33ed38bf-fae6-44bf-b0a8-a62d269747bb","title":null,"description":null,"createdAt":"2022-06-09T12:41:32.977+02:00","updatedAt":"2022-06-09T12:41:32.977+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"510b1ac3-c3bc-4292-91a0-36c52ac2ef6b","title":null,"description":null,"createdAt":"2022-06-09T12:42:14.227+02:00","updatedAt":"2022-06-09T12:42:14.227+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"6ac3a51f-4fda-4a77-85fd-355b17fdfabd","title":null,"description":null,"createdAt":"2022-06-09T12:42:56.238+02:00","updatedAt":"2022-06-09T12:42:56.238+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"0bf8bab4-c079-4626-9d84-0f2191763335","title":null,"description":null,"createdAt":"2022-06-09T12:44:37.526+02:00","updatedAt":"2022-06-09T12:44:37.526+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"c6a94268-2c21-4137-9d3f-2cd601fa5f1c","title":null,"description":null,"createdAt":"2022-06-09T12:46:06.239+02:00","updatedAt":"2022-06-09T12:46:06.239+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"f6a9ad77-77c8-4a11-a79a-4314b61f2c76","title":null,"description":null,"createdAt":"2022-06-09T12:46:50.648+02:00","updatedAt":"2022-06-09T12:46:50.648+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"cd0526bf-633f-4a94-b06a-450b40b0b5b1","title":null,"description":null,"createdAt":"2022-06-09T12:48:11.665+02:00","updatedAt":"2022-06-09T12:48:11.665+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"358695c2-725c-429e-8bb5-70249ccc1436","title":null,"description":null,"createdAt":"2022-06-09T12:48:49.517+02:00","updatedAt":"2022-06-09T12:48:49.517+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"32fced43-3700-48df-ad63-3867da40fbb5","title":null,"description":null,"createdAt":"2022-06-09T13:16:18.578+02:00","updatedAt":"2022-06-09T13:16:18.578+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"d34ed5aa-7aac-44b4-8491-0c1f45b80b1c","title":null,"description":null,"createdAt":"2022-06-09T14:50:32.229+02:00","updatedAt":"2022-06-09T14:50:32.229+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"94d23d2e-7e30-46bb-83d7-2ae700742ffc","title":null,"description":null,"createdAt":"2022-06-09T14:50:32.627+02:00","updatedAt":"2022-06-09T14:50:32.627+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"a79fe015-b147-469a-b85f-b56f02a4e573","title":null,"description":null,"createdAt":"2022-06-09T14:50:32.761+02:00","updatedAt":"2022-06-09T14:50:32.761+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"c2a49af3-87da-454d-a26a-7ec653add3f3","title":null,"description":null,"createdAt":"2022-06-09T14:50:33.703+02:00","updatedAt":"2022-06-09T14:50:33.703+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"ef00c41c-1ec0-4280-b206-63a8379652b9","title":null,"description":null,"createdAt":"2022-06-09T14:50:33.821+02:00","updatedAt":"2022-06-09T14:50:33.821+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"b9c36958-e4c8-4586-bda0-274ec02065a7","title":null,"description":null,"createdAt":"2022-06-09T14:50:34.023+02:00","updatedAt":"2022-06-09T14:50:34.023+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"7508e3f5-aa34-4463-8f97-5904cc68e0be","title":null,"description":null,"createdAt":"2022-06-09T14:50:34.147+02:00","updatedAt":"2022-06-09T14:50:34.147+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"763c30ee-b3e1-46ee-ad97-58bce7e3fe12","title":null,"description":null,"createdAt":"2022-06-09T14:50:34.662+02:00","updatedAt":"2022-06-09T14:50:34.662+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"0c73c7de-68a5-4f7f-8c42-86689ee00e78","title":null,"description":null,"createdAt":"2022-06-09T14:50:34.780+02:00","updatedAt":"2022-06-09T14:50:34.780+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"20d38e25-2e9e-4b4e-abca-3553b0eae1de","title":null,"description":null,"createdAt":"2022-05-19T11:34:47.549+02:00","updatedAt":"2022-05-19T11:34:47.549+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"0ef2eae4-ff3b-401b-84d7-d9129f478100","title":null,"description":null,"createdAt":"2022-06-09T14:50:34.879+02:00","updatedAt":"2022-06-09T14:50:34.879+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"19bce063-b89b-475f-a238-3eec803a6b1a","title":null,"description":null,"createdAt":"2022-05-19T11:43:24.955+02:00","updatedAt":"2022-05-19T11:43:24.955+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"342fc7af-6db5-4bdd-be68-dfeeedd25f4c","title":null,"description":null,"createdAt":"2022-05-19T11:44:50.255+02:00","updatedAt":"2022-05-19T11:44:50.255+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"dc4de3fd-1baa-4591-8bf4-07ceb54707a4","title":null,"description":null,"createdAt":"2022-05-19T11:55:41.912+02:00","updatedAt":"2022-05-19T11:55:41.912+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}],"hasMore":false,"nextCursor":"100"}}}'
- recorded: 2022-06-09T12:51:38.319Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 7d1447f32538f697270eb23c4a1230e709ef0ba187cf8f93be9e83de84f335de
      X-APOLLO-OPERATION-NAME: CreateConversation
    body: '{"operationName":"CreateConversation","variables":{},"query":"mutation CreateConversation { createConversation { conversation { __typename ...ConversationFragment } } }  fragment EphemeralUrlFragment on EphemeralUrl { expiresAt url }  fragment ProviderFragment
      on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation { id provider { __typename ...ProviderFragment } typingAt seenUntil }  fragment ConversationFragment
      on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Thu, 09 Jun 2022 12:51:38 GMT
      connection: close
      content-length: '350'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: bcb178f5-063f-4a42-923a-4b9b988ebcc4
    body: '{"data":{"createConversation":{"conversation":{"__typename":"Conversation","id":"78d035ce-3dc2-4673-8e6b-ba2dbb9a93e4","title":null,"description":null,"createdAt":"2022-06-09T14:51:38.311+02:00","updatedAt":"2022-06-09T14:51:38.311+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}}}}'
