!tape
name: test conversation creation and conversations & conversation watching
interactions:
- recorded: 2022-05-18T11:44:28.412Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 7d1447f32538f697270eb23c4a1230e709ef0ba187cf8f93be9e83de84f335de
      X-APOLLO-OPERATION-NAME: CreateConversation
    body: '{"operationName":"CreateConversation","variables":{},"query":"mutation CreateConversation { createConversation { conversation { __typename ...ConversationFragment } } }  fragment EphemeralUrlFragment on EphemeralUrl { expiresAt url }  fragment ProviderFragment
      on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation { id provider { __typename ...ProviderFragment } typingAt seenUntil }  fragment ConversationFragment
      on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Wed, 18 May 2022 11:44:28 GMT
      connection: close
      content-length: '350'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: 6bb3a6e8-f252-4918-bb6b-0f02b396a6ac
    body: '{"data":{"createConversation":{"conversation":{"__typename":"Conversation","id":"0099e416-f4dc-49d4-91e7-5eca9f8c4f71","title":null,"description":null,"createdAt":"2022-05-18T13:44:28.392+02:00","updatedAt":"2022-05-18T13:44:28.392+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}}}}'
- recorded: 2022-05-18T11:44:29.299Z
  request:
    method: GET
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      Connection: Upgrade
      Sec-WebSocket-Extensions: permessage-deflate
      Sec-WebSocket-Key: mF95nAOJJQRFesf+7y2Apw==
      Sec-WebSocket-Protocol: graphql-ws
      Sec-WebSocket-Version: '13'
      Upgrade: websocket
  response:
    status: 101
    headers:
      connection: Upgrade
      sec-websocket-accept: Ij7rE+NrLgj9d7/kUkDbsd8y6v0=
      sec-websocket-protocol: graphql-ws
      upgrade: websocket
      vary: Origin
      x-request-id: 2348fb4f-58a0-4afe-844f-7f0a6f24dc34
    body: ''
- recorded: 2022-05-18T11:44:29.321Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 244deb178192060baf2b4a8957f3cc1cffc740319d7b09da0641aaa4dcb0f46a
      X-APOLLO-OPERATION-NAME: ConversationList
    body: '{"operationName":"ConversationList","variables":{"pageInfo":{}},"query":"query ConversationList($pageInfo: OpaqueCursorPage!) { conversations(page: $pageInfo) { conversations { __typename ...ConversationFragment } hasMore nextCursor } }  fragment
      EphemeralUrlFragment on EphemeralUrl { expiresAt url }  fragment ProviderFragment on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation { id provider
      { __typename ...ProviderFragment } typingAt seenUntil }  fragment ConversationFragment on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment
      } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Wed, 18 May 2022 11:44:29 GMT
      connection: close
      content-length: '3131'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: 994a7998-72e4-4fe6-97f0-e0d3382609df
    body: '{"data":{"conversations":{"conversations":[{"__typename":"Conversation","id":"da456654-047f-4d90-b1ab-87fec6c96cb8","title":null,"description":null,"createdAt":"2022-05-18T13:38:58.444+02:00","updatedAt":"2022-05-18T13:38:59.502+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":"Vous : Hello","unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"fd4f1cf4-8094-4a02-ba99-5a53925bb0b2","title":null,"description":null,"createdAt":"2022-05-18T13:38:18.754+02:00","updatedAt":"2022-05-18T13:38:20.000+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":"Vous : Hello","unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"6374850c-8698-4a99-aace-146d771b1e48","title":null,"description":null,"createdAt":"2022-05-18T13:36:34.617+02:00","updatedAt":"2022-05-18T13:36:35.860+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":"Vous : Hello","unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"73b4e0c5-805b-457d-9c7e-0cf13654e263","title":null,"description":null,"createdAt":"2022-05-05T14:50:27.132+02:00","updatedAt":"2022-05-05T17:12:40.098+02:00","inboxPreviewTitle":"Benoit
      Doctor","lastMessagePreview":"Benoit : sdfsdff","unreadMessageCount":0,"providers":[{"__typename":"ProviderInConversation","id":"f9159a2f-095a-44b8-a28e-c654b6882097","provider":{"__typename":"Provider","id":"93055717-8bcf-4e4e-baad-bce88b969ab6","avatarUrl":null,"prefix":null,"firstName":"Benoit","lastName":"Doctor"},"typingAt":null,"seenUntil":"2022-05-05T18:43:39.678+02:00"}]},{"__typename":"Conversation","id":"daf58099-f909-43b6-bc10-cfbe532bc5e5","title":null,"description":null,"createdAt":"2022-05-18T13:41:04.512+02:00","updatedAt":"2022-05-18T13:41:04.512+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"0099e416-f4dc-49d4-91e7-5eca9f8c4f71","title":null,"description":null,"createdAt":"2022-05-18T13:44:28.392+02:00","updatedAt":"2022-05-18T13:44:28.392+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"62ca8438-fb06-4007-b188-45c9d935cd3f","title":null,"description":null,"createdAt":"2022-05-18T13:40:16.546+02:00","updatedAt":"2022-05-18T13:40:16.546+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"c5e6e65c-7a59-490f-8bdb-4c2d03865aad","title":null,"description":null,"createdAt":"2022-05-18T13:40:18.114+02:00","updatedAt":"2022-05-18T13:40:18.114+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]},{"__typename":"Conversation","id":"5d358882-cb84-4286-a095-506d4413e3db","title":null,"description":null,"createdAt":"2022-05-18T13:41:03.061+02:00","updatedAt":"2022-05-18T13:41:03.061+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}],"hasMore":false,"nextCursor":"100"}}}'
- recorded: 2022-05-18T11:40:17.603Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 5b7089e28d9c42992d08448bbc7d5c8d9b5165a817a48fc93ade3008af078795
      X-APOLLO-OPERATION-NAME: Conversation
    body: '{"operationName":"Conversation","variables":{"id":"62ca8438-fb06-4007-b188-45c9d935cd3f"},"query":"query Conversation($id: UUID!) { conversation(id: $id) { conversation { __typename ...ConversationFragment } } }  fragment EphemeralUrlFragment on EphemeralUrl
      { expiresAt url }  fragment ProviderFragment on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation { id provider { __typename ...ProviderFragment
      } typingAt seenUntil }  fragment ConversationFragment on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Wed, 18 May 2022 11:40:17 GMT
      connection: close
      content-length: '344'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: 9f757088-f8df-4633-88b7-4f37d3e4b8a2
    body: '{"data":{"conversation":{"conversation":{"__typename":"Conversation","id":"62ca8438-fb06-4007-b188-45c9d935cd3f","title":null,"description":null,"createdAt":"2022-05-18T13:40:16.546+02:00","updatedAt":"2022-05-18T13:40:16.546+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}}}}'
- recorded: 2022-05-18T11:41:04.100Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 5b7089e28d9c42992d08448bbc7d5c8d9b5165a817a48fc93ade3008af078795
      X-APOLLO-OPERATION-NAME: Conversation
    body: '{"operationName":"Conversation","variables":{"id":"5d358882-cb84-4286-a095-506d4413e3db"},"query":"query Conversation($id: UUID!) { conversation(id: $id) { conversation { __typename ...ConversationFragment } } }  fragment EphemeralUrlFragment on EphemeralUrl
      { expiresAt url }  fragment ProviderFragment on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation { id provider { __typename ...ProviderFragment
      } typingAt seenUntil }  fragment ConversationFragment on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Wed, 18 May 2022 11:41:04 GMT
      connection: close
      content-length: '344'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: 62c65848-98b8-4abe-8546-85c1f72ebff0
    body: '{"data":{"conversation":{"conversation":{"__typename":"Conversation","id":"5d358882-cb84-4286-a095-506d4413e3db","title":null,"description":null,"createdAt":"2022-05-18T13:41:03.061+02:00","updatedAt":"2022-05-18T13:41:03.061+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}}}}'
- recorded: 2022-05-18T11:44:29.412Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 5b7089e28d9c42992d08448bbc7d5c8d9b5165a817a48fc93ade3008af078795
      X-APOLLO-OPERATION-NAME: Conversation
    body: '{"operationName":"Conversation","variables":{"id":"0099e416-f4dc-49d4-91e7-5eca9f8c4f71"},"query":"query Conversation($id: UUID!) { conversation(id: $id) { conversation { __typename ...ConversationFragment } } }  fragment EphemeralUrlFragment on EphemeralUrl
      { expiresAt url }  fragment ProviderFragment on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation { id provider { __typename ...ProviderFragment
      } typingAt seenUntil }  fragment ConversationFragment on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Wed, 18 May 2022 11:44:29 GMT
      connection: close
      content-length: '344'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: 057343b7-764e-4d72-a1ae-bb970901e5ae
    body: '{"data":{"conversation":{"conversation":{"__typename":"Conversation","id":"0099e416-f4dc-49d4-91e7-5eca9f8c4f71","title":null,"description":null,"createdAt":"2022-05-18T13:44:28.392+02:00","updatedAt":"2022-05-18T13:44:28.392+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}}}}'
