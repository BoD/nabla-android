!tape
name: test watch conversation is called when the providers are updated
interactions:
- recorded: 2022-06-15T13:22:14.963Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 7d1447f32538f697270eb23c4a1230e709ef0ba187cf8f93be9e83de84f335de
      X-APOLLO-OPERATION-NAME: CreateConversation
    body: '{"operationName":"CreateConversation","variables":{},"query":"mutation CreateConversation { createConversation { conversation { __typename ...ConversationFragment } } }  fragment EphemeralUrlFragment on EphemeralUrl { expiresAt url }  fragment ProviderFragment
      on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation { id provider { __typename ...ProviderFragment } typingAt seenUntil }  fragment ConversationFragment
      on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Wed, 15 Jun 2022 13:22:14 GMT
      connection: close
      content-length: '350'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: 0958c44d-eedc-4680-9b0f-e067842465c0
    body: '{"data":{"createConversation":{"conversation":{"__typename":"Conversation","id":"3ea15e4a-3f0a-4b03-bf80-adcef5e33b84","title":null,"description":null,"createdAt":"2022-06-15T15:22:14.926+02:00","updatedAt":"2022-06-15T15:22:14.926+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}}}}'
- recorded: 2022-06-09T12:51:38.738Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 5b7089e28d9c42992d08448bbc7d5c8d9b5165a817a48fc93ade3008af078795
      X-APOLLO-OPERATION-NAME: Conversation
    body: '{"operationName":"Conversation","variables":{"id":"5afede5a-1e1e-41a0-aabc-3c3d291f75c3"},"query":"query Conversation($id: UUID!) { conversation(id: $id) { conversation { __typename ...ConversationFragment } } }  fragment EphemeralUrlFragment on EphemeralUrl
      { expiresAt url }  fragment ProviderFragment on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation { id provider { __typename ...ProviderFragment
      } typingAt seenUntil }  fragment ConversationFragment on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Thu, 09 Jun 2022 12:51:38 GMT
      connection: close
      content-length: '344'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: 32c2bb21-9f3a-4c18-9827-5fbe0988a4b1
    body: '{"data":{"conversation":{"conversation":{"__typename":"Conversation","id":"5afede5a-1e1e-41a0-aabc-3c3d291f75c3","title":null,"description":null,"createdAt":"2022-06-09T14:51:38.690+02:00","updatedAt":"2022-06-09T14:51:38.690+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}}}}'
- recorded: 2022-06-09T16:08:51.384Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/jwt/refresh
    body: '{"refresh_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkNzVhODY2Yy04OWY0LTRkNzYtYjg1NS1iNTNlYjRkYzQ0NmUiLCJpc3MiOiJkZXYtcGF0aWVudCIsInR5cCI6IlJlZnJlc2giLCJleHAiOjE2NjI1NjU5NDAsInNlc3Npb25fdXVpZCI6ImRlMTc1NjdlLWRhNWItNDJmMC1iMjVmLTFhYTA5NTJlYzg1NSIsIm9yZ2FuaXphdGlvblN0cmluZ0lkIjoibmFibGEifQ.kH4XQogQmAABMDQYJYYINsoWxaHPzK9u382uvZoZYxs"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Thu, 09 Jun 2022 16:08:51 GMT
      connection: close
      content-length: '703'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-request-id: e0bc2acd-ea6c-4362-9c58-d3dfff17e1b7
    body: |-
      {
          "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkNzVhODY2Yy04OWY0LTRkNzYtYjg1NS1iNTNlYjRkYzQ0NmUiLCJpc3MiOiJkZXYtcGF0aWVudCIsInR5cCI6IkJlYXJlciIsImV4cCI6MTY1NDc5MTIzMSwic2Vzc2lvbl91dWlkIjoiZGUxNzU2N2UtZGE1Yi00MmYwLWIyNWYtMWFhMDk1MmVjODU1Iiwib3JnYW5pemF0aW9uU3RyaW5nSWQiOiJuYWJsYSJ9.usr-8My3OnQbSc8btAromJiTFdAAx64ZOQsDACsbn5Q",
          "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkNzVhODY2Yy04OWY0LTRkNzYtYjg1NS1iNTNlYjRkYzQ0NmUiLCJpc3MiOiJkZXYtcGF0aWVudCIsInR5cCI6IlJlZnJlc2giLCJleHAiOjE2NjI1NjY5MzEsInNlc3Npb25fdXVpZCI6ImRlMTc1NjdlLWRhNWItNDJmMC1iMjVmLTFhYTA5NTJlYzg1NSIsIm9yZ2FuaXphdGlvblN0cmluZ0lkIjoibmFibGEifQ.LfwxEt2VMhhCxgftmhXZnczMszC2lhVNLfJaPONhi2E"
      }
- recorded: 2022-06-09T16:06:38.977Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 5b7089e28d9c42992d08448bbc7d5c8d9b5165a817a48fc93ade3008af078795
      X-APOLLO-OPERATION-NAME: Conversation
    body: '{"operationName":"Conversation","variables":{"id":"d92230a3-a741-4fce-8920-e600bb6e2e5d"},"query":"query Conversation($id: UUID!) { conversation(id: $id) { conversation { __typename ...ConversationFragment } } }  fragment EphemeralUrlFragment on EphemeralUrl
      { expiresAt url }  fragment ProviderFragment on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation { id provider { __typename ...ProviderFragment
      } typingAt seenUntil }  fragment ConversationFragment on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Thu, 09 Jun 2022 16:06:38 GMT
      connection: close
      content-length: '344'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: e672c89c-c0de-40cf-a881-ba8761a75590
    body: '{"data":{"conversation":{"conversation":{"__typename":"Conversation","id":"d92230a3-a741-4fce-8920-e600bb6e2e5d","title":null,"description":null,"createdAt":"2022-06-09T18:06:38.346+02:00","updatedAt":"2022-06-09T18:06:38.346+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}}}}'
- recorded: 2022-06-09T16:08:51.639Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 5b7089e28d9c42992d08448bbc7d5c8d9b5165a817a48fc93ade3008af078795
      X-APOLLO-OPERATION-NAME: Conversation
    body: '{"operationName":"Conversation","variables":{"id":"17c915ca-5ddb-4725-8218-60366a00b9d2"},"query":"query Conversation($id: UUID!) { conversation(id: $id) { conversation { __typename ...ConversationFragment } } }  fragment EphemeralUrlFragment on EphemeralUrl
      { expiresAt url }  fragment ProviderFragment on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation { id provider { __typename ...ProviderFragment
      } typingAt seenUntil }  fragment ConversationFragment on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Thu, 09 Jun 2022 16:08:51 GMT
      connection: close
      content-length: '344'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: 93bd1a26-bbd6-46bf-9b93-44d69ebc2fed
    body: '{"data":{"conversation":{"conversation":{"__typename":"Conversation","id":"17c915ca-5ddb-4725-8218-60366a00b9d2","title":null,"description":null,"createdAt":"2022-06-09T18:08:51.419+02:00","updatedAt":"2022-06-09T18:08:51.419+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}}}}'
- recorded: 2022-06-15T13:14:33.997Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/jwt/refresh
    headers: { }
    body: '{"refresh_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkNzVhODY2Yy04OWY0LTRkNzYtYjg1NS1iNTNlYjRkYzQ0NmUiLCJpc3MiOiJkZXYtcGF0aWVudCIsInR5cCI6IlJlZnJlc2giLCJleHAiOjE2NjMwNzQxMDAsInNlc3Npb25fdXVpZCI6IjliM2NjMzZkLTFiOGUtNGMwMi05NzRlLTkwZjJhOGYxOTZlMiIsIm9yZ2FuaXphdGlvblN0cmluZ0lkIjoibmFibGEifQ.tw5O59WTXYSKkMNKaJ6iR02UV_0EWzLFyCLhEnpCFME"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Wed, 15 Jun 2022 13:14:33 GMT
      connection: close
      content-length: '703'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-request-id: 55b1685f-2eb5-4065-b900-a16fa2d4839b
    body: |-
      {
          "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkNzVhODY2Yy04OWY0LTRkNzYtYjg1NS1iNTNlYjRkYzQ0NmUiLCJpc3MiOiJkZXYtcGF0aWVudCIsInR5cCI6IkJlYXJlciIsImV4cCI6MTY1NTI5OTE3Mywic2Vzc2lvbl91dWlkIjoiOWIzY2MzNmQtMWI4ZS00YzAyLTk3NGUtOTBmMmE4ZjE5NmUyIiwib3JnYW5pemF0aW9uU3RyaW5nSWQiOiJuYWJsYSJ9.-GEvJsc5YwBRiSXH4C2CdGfS7u4ejDzkC8qB9Y8c2Tk",
          "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJkNzVhODY2Yy04OWY0LTRkNzYtYjg1NS1iNTNlYjRkYzQ0NmUiLCJpc3MiOiJkZXYtcGF0aWVudCIsInR5cCI6IlJlZnJlc2giLCJleHAiOjE2NjMwNzQ4NzMsInNlc3Npb25fdXVpZCI6IjliM2NjMzZkLTFiOGUtNGMwMi05NzRlLTkwZjJhOGYxOTZlMiIsIm9yZ2FuaXphdGlvblN0cmluZ0lkIjoibmFibGEifQ.nuyyiDa1WT8IL5CEvOVv7QMKrj5KZNio4mAmfr6e-_w"
      }
- recorded: 2022-06-15T13:14:34.625Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 5b7089e28d9c42992d08448bbc7d5c8d9b5165a817a48fc93ade3008af078795
      X-APOLLO-OPERATION-NAME: Conversation
    body: '{"operationName":"Conversation","variables":{"id":"4c4fd32f-45fc-49d5-8b69-cff233ca893e"},"query":"query Conversation($id: UUID!) { conversation(id: $id) { conversation { __typename ...ConversationFragment } } }  fragment EphemeralUrlFragment on EphemeralUrl
      { expiresAt url }  fragment ProviderFragment on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation { id provider { __typename ...ProviderFragment
      } typingAt seenUntil }  fragment ConversationFragment on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Wed, 15 Jun 2022 13:14:34 GMT
      connection: close
      content-length: '344'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: 80a77584-f44a-4214-8ca4-f82ebd5056fc
    body: '{"data":{"conversation":{"conversation":{"__typename":"Conversation","id":"4c4fd32f-45fc-49d5-8b69-cff233ca893e","title":null,"description":null,"createdAt":"2022-06-15T15:14:34.051+02:00","updatedAt":"2022-06-15T15:14:34.051+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}}}}'
- recorded: 2022-06-15T13:22:15.106Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 5b7089e28d9c42992d08448bbc7d5c8d9b5165a817a48fc93ade3008af078795
      X-APOLLO-OPERATION-NAME: Conversation
    body: '{"operationName":"Conversation","variables":{"id":"3ea15e4a-3f0a-4b03-bf80-adcef5e33b84"},"query":"query Conversation($id: UUID!) { conversation(id: $id) { conversation { __typename ...ConversationFragment } } }  fragment EphemeralUrlFragment on EphemeralUrl
      { expiresAt url }  fragment ProviderFragment on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation { id provider { __typename ...ProviderFragment
      } typingAt seenUntil }  fragment ConversationFragment on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Wed, 15 Jun 2022 13:22:15 GMT
      connection: close
      content-length: '344'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: f42aa728-07aa-47d5-b998-145461593783
    body: '{"data":{"conversation":{"conversation":{"__typename":"Conversation","id":"3ea15e4a-3f0a-4b03-bf80-adcef5e33b84","title":null,"description":null,"createdAt":"2022-06-15T15:22:14.926+02:00","updatedAt":"2022-06-15T15:22:14.926+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}}}}'
- recorded: 2022-06-20T14:03:20.302Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 1fa2e4d0890e5c01edb42cc28154b90fd3832cedbde6e09c83fa7ed8d05e740f
      X-APOLLO-OPERATION-NAME: CreateConversation
    body: '{"operationName":"CreateConversation","variables":{},"query":"mutation CreateConversation($title: String, $providerIdToAssign: UUID) { createConversation(title: $title, providerIdToAssign: $providerIdToAssign) { conversation { __typename ...ConversationFragment
      } } }  fragment EphemeralUrlFragment on EphemeralUrl { expiresAt url }  fragment ProviderFragment on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation
      { id provider { __typename ...ProviderFragment } typingAt seenUntil }  fragment ConversationFragment on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment
      } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Mon, 20 Jun 2022 14:03:20 GMT
      connection: close
      content-length: '350'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: e9cbb5e5-118f-4443-a969-a8d8cabd5258
    body: '{"data":{"createConversation":{"conversation":{"__typename":"Conversation","id":"bcb2a9c3-6059-4a0e-95b2-9f196dddfa18","title":null,"description":null,"createdAt":"2022-06-20T16:03:20.286+02:00","updatedAt":"2022-06-20T16:03:20.286+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}}}}'
- recorded: 2022-06-20T14:02:28.948Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 5b7089e28d9c42992d08448bbc7d5c8d9b5165a817a48fc93ade3008af078795
      X-APOLLO-OPERATION-NAME: Conversation
    body: '{"operationName":"Conversation","variables":{"id":"aae6c689-28a4-419b-96d6-f8a4e075b6d3"},"query":"query Conversation($id: UUID!) { conversation(id: $id) { conversation { __typename ...ConversationFragment } } }  fragment EphemeralUrlFragment on EphemeralUrl
      { expiresAt url }  fragment ProviderFragment on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation { id provider { __typename ...ProviderFragment
      } typingAt seenUntil }  fragment ConversationFragment on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Mon, 20 Jun 2022 14:02:28 GMT
      connection: close
      content-length: '344'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: 8ea29609-427a-4dfc-a9bb-5553abd9ce57
    body: '{"data":{"conversation":{"conversation":{"__typename":"Conversation","id":"aae6c689-28a4-419b-96d6-f8a4e075b6d3","title":null,"description":null,"createdAt":"2022-06-20T16:02:28.490+02:00","updatedAt":"2022-06-20T16:02:28.490+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}}}}'
- recorded: 2022-06-20T14:03:20.419Z
  request:
    method: POST
    uri: http://localhost:3000/api/v1/patient/graphql/sdk/authenticated
    headers:
      X-APOLLO-OPERATION-ID: 5b7089e28d9c42992d08448bbc7d5c8d9b5165a817a48fc93ade3008af078795
      X-APOLLO-OPERATION-NAME: Conversation
    body: '{"operationName":"Conversation","variables":{"id":"bcb2a9c3-6059-4a0e-95b2-9f196dddfa18"},"query":"query Conversation($id: UUID!) { conversation(id: $id) { conversation { __typename ...ConversationFragment } } }  fragment EphemeralUrlFragment on EphemeralUrl
      { expiresAt url }  fragment ProviderFragment on Provider { id avatarUrl { __typename ...EphemeralUrlFragment } prefix firstName lastName }  fragment ProviderInConversationFragment on ProviderInConversation { id provider { __typename ...ProviderFragment
      } typingAt seenUntil }  fragment ConversationFragment on Conversation { id title description createdAt updatedAt inboxPreviewTitle lastMessagePreview unreadMessageCount providers { __typename ...ProviderInConversationFragment } }"}'
  response:
    status: 200
    headers:
      Access-Control-Allow-Origin: '*'
      Date: Mon, 20 Jun 2022 14:03:20 GMT
      connection: close
      content-length: '344'
      content-type: application/json; charset=UTF-8
      vary: Origin
      x-nabla-minimum-android-code-version: '0'
      x-nabla-minimum-code-version: '323'
      x-nabla-minimum-ios-code-version: '0'
      x-request-id: 3fda6549-7fbd-48bb-9398-5db22265eb3b
    body: '{"data":{"conversation":{"conversation":{"__typename":"Conversation","id":"bcb2a9c3-6059-4a0e-95b2-9f196dddfa18","title":null,"description":null,"createdAt":"2022-06-20T16:03:20.286+02:00","updatedAt":"2022-06-20T16:03:20.286+02:00","inboxPreviewTitle":"Nouvelle
      conversation","lastMessagePreview":null,"unreadMessageCount":0,"providers":[]}}}}'
